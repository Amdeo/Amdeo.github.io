<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="shell," />










<meta name="description" content="shell实战shell脚本开头 指定一个解释器 以#！开头 + 解释器的路径 1#! &#x2F;bin&#x2F;bash  shell脚本的执行方法 第一种方法： 使用sh命令 + 脚本路径 1sh script.sh  第二种方法 123451. 赋予shell脚本权限chmod a+x script.sh2. 执行.&#x2F;script.sh  打印echo 使用echo打印，每次代用会默认添加一个换行符 123">
<meta property="og:type" content="article">
<meta property="og:title" content="shell脚本实战">
<meta property="og:url" content="http://www.yuandongbin.xyz/2019/12/05/shell/shell%E8%84%9A%E6%9C%AC/index.html">
<meta property="og:site_name" content="袁栋彬的主页">
<meta property="og:description" content="shell实战shell脚本开头 指定一个解释器 以#！开头 + 解释器的路径 1#! &#x2F;bin&#x2F;bash  shell脚本的执行方法 第一种方法： 使用sh命令 + 脚本路径 1sh script.sh  第二种方法 123451. 赋予shell脚本权限chmod a+x script.sh2. 执行.&#x2F;script.sh  打印echo 使用echo打印，每次代用会默认添加一个换行符 123">
<meta property="article:published_time" content="2019-12-05T14:30:03.000Z">
<meta property="article:modified_time" content="2022-10-07T11:10:31.259Z">
<meta property="article:author" content="cooper yuan">
<meta property="article:tag" content="shell">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.yuandongbin.xyz/2019/12/05/shell/shell脚本/"/>





  <title>shell脚本实战 | 袁栋彬的主页</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">袁栋彬的主页</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" target="_self" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.yuandongbin.xyz/2019/12/05/shell/shell%E8%84%9A%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="cooper yuan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="袁栋彬的主页">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">shell脚本实战</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-12-05T22:30:03+08:00">
                2019-12-05
              </time>
            

            

            
          </span>
          
            <span class="post-updated">
              &nbsp; | &nbsp; 更新于
              <time itemprop="dateUpdated" datetime="2022-10-07T19:10:31+08:00" content="2022-10-07">
                2022-10-07
              </time>
            </span>
          
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="shell实战"><a href="#shell实战" class="headerlink" title="shell实战"></a>shell实战</h1><p><strong>shell脚本开头</strong></p>
<p>指定一个解释器</p>
<p>以#！开头 + 解释器的路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br></pre></td></tr></table></figure>

<p>shell脚本的执行方法</p>
<p>第一种方法：</p>
<p>使用sh命令 + 脚本路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh script.sh</span><br></pre></td></tr></table></figure>

<p>第二种方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 赋予shell脚本权限</span><br><span class="line">chmod a+x script.sh</span><br><span class="line"></span><br><span class="line">2. 执行</span><br><span class="line">./script.sh</span><br></pre></td></tr></table></figure>

<h1 id="打印"><a href="#打印" class="headerlink" title="打印"></a>打印</h1><p><strong>echo</strong></p>
<p>使用echo打印，每次代用会默认添加一个换行符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">输出双引号的字符串</span></span><br><span class="line">echo "Welcome to Bash"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">输出不带双引号的文本</span></span><br><span class="line">echo Welcome to Bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">输出单引号的文本</span></span><br><span class="line">echo 'Welcome to Bash'</span><br></pre></td></tr></table></figure>

<p><strong>printf</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line">printf "Hello world\n"</span><br><span class="line"></span><br><span class="line">printf "%-5s %-10s %-4s\n" NO Name Mark</span><br><span class="line"><span class="meta">#</span><span class="bash"> “-” 指明一个格式为左对齐（默认的使用右对齐方式）</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5s 指定一个字符串长度，不够的添加空格</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用printf不会添加换行符，需要换行需要自己增加</li>
</ul>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p><strong>定义变量</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">定义变量 = 左右两边不能有空格</span></span><br><span class="line">fruit=apple </span><br><span class="line">count=5</span><br></pre></td></tr></table></figure>

<p><strong>使用变量</strong></p>
<ul>
<li><p>$变量名</p>
</li>
<li><p>${变量名}</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "We have $count $&#123;fruit&#125;(s)"</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line">fruit=apple</span><br><span class="line">count=5</span><br><span class="line"><span class="meta">#</span><span class="bash">变量的使用</span></span><br><span class="line">echo "We have $count $&#123;fruit&#125;(s)"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">output</span></span><br><span class="line"><span class="meta">#</span><span class="bash">We have 5 apple(s)</span></span><br><span class="line"><span class="meta">#</span></span><br></pre></td></tr></table></figure>

<h1 id="获取变量的长度"><a href="#获取变量的长度" class="headerlink" title="获取变量的长度"></a><strong>获取变量的长度</strong></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var=0123456789</span><br><span class="line">length=$&#123;#var&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">output : 10</span></span><br></pre></td></tr></table></figure>

<h1 id="获取当前shell的版本"><a href="#获取当前shell的版本" class="headerlink" title="获取当前shell的版本"></a><strong>获取当前shell的版本</strong></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br><span class="line">或者</span><br><span class="line">echo $0</span><br></pre></td></tr></table></figure>

<h1 id="判断当前的用户是为超级用户"><a href="#判断当前的用户是为超级用户" class="headerlink" title="判断当前的用户是为超级用户"></a>判断当前的用户是为超级用户</h1><p>使用$UID这个变量，因为root用户的UID是0</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if [$UID -ne 0];then</span><br><span class="line">echo Non root user.Please run as root.</span><br><span class="line">else</span><br><span class="line">echo "Root user"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h1 id="通过shell进行数学运算"><a href="#通过shell进行数学运算" class="headerlink" title="通过shell进行数学运算"></a>通过shell进行数学运算</h1><p>let命令可以直接执行基本的算数操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line">no1=4;</span><br><span class="line">no2=5;</span><br><span class="line"></span><br><span class="line">let result=no1+no2;</span><br><span class="line">echo $result</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">output：9</span></span><br></pre></td></tr></table></figure>

<p>自增和自减</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let no1++</span><br><span class="line">let no1--</span><br></pre></td></tr></table></figure>

<p>简写</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let no+=6   #等价于 let no=no+6</span><br></pre></td></tr></table></figure>

<p>使用操作符[]的使用方法和let命令类似：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line">no1=4;</span><br><span class="line">no2=5;</span><br><span class="line"></span><br><span class="line">result=$[no1 + no2]</span><br><span class="line"></span><br><span class="line">result=$[$no1 + 5]</span><br><span class="line"></span><br><span class="line">result=$((no1 + 50))</span><br><span class="line"></span><br><span class="line">result=`expr 3 + 4`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">这些方法只能用于整数运算，而不支持浮点数</span></span><br></pre></td></tr></table></figure>

<h2 id="浮点数运算"><a href="#浮点数运算" class="headerlink" title="浮点数运算"></a>浮点数运算</h2><p>bc是一个用于数学运算的高级工具，这个精密计算器包含了大量的选项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo "4 * 0.56" | bc  #2.24</span><br><span class="line"></span><br><span class="line">no=54;</span><br><span class="line">result=`echo "$no * 1.5" | bc`</span><br><span class="line">echo $result</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">ourput 81.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>设定小数精度（数值范围）：在下面的例子中，参数scale=2将小数位个数设置为2</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "scale=2;3/8" | bc</span><br><span class="line"><span class="meta">#</span><span class="bash">output 0.37</span></span><br></pre></td></tr></table></figure>

<p>参数scale=2将小数位个数设置为2</p>
<ul>
<li>进制转换：用bc可以将一种进制系统转换为另一种，来看看如何将十进制转换成二进制，然后再将二进制转换回十进制：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line">no=100</span><br><span class="line">echo "obase=2;$no" | bc</span><br><span class="line"></span><br><span class="line">no=1100100</span><br><span class="line">echo "obase=10;ibase=2;$no" | bc</span><br></pre></td></tr></table></figure>

<p>obase=2 二进制 obase=10 十进制</p>
<h2 id="计算平方以及平方根："><a href="#计算平方以及平方根：" class="headerlink" title="计算平方以及平方根："></a>计算平方以及平方根：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "sqrt(100)" | bc #Square root</span><br><span class="line">echo "10^10" | bc #Square</span><br></pre></td></tr></table></figure>



<h1 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "This is a sample text 1" &gt; temp.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>先清空temp.txt文件内容</li>
<li>将“This is  a sample text 1” 写入文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "This is a sample text 2" &gt;&gt; temp.txt</span><br></pre></td></tr></table></figure>

<p>将输出的内容以追加的方式写入文件中。</p>
<h1 id="数组和关联数组"><a href="#数组和关联数组" class="headerlink" title="数组和关联数组"></a>数组和关联数组</h1><p>定义一个数组</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_var=(1 2 3 4 5 6)</span><br></pre></td></tr></table></figure>

<p>数组赋值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">array_var[0]="test1"</span><br><span class="line">array_var[1]="test2"</span><br><span class="line">array_var[2]="test3"</span><br><span class="line">array_var[3]="test4"</span><br><span class="line">array_var[4]="test5"</span><br><span class="line">array_var[5]="test6"</span><br><span class="line"></span><br><span class="line">echo $&#123;array_var[0]&#125;</span><br></pre></td></tr></table></figure>

<p>获取所有的数组元素</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_var[*]</span><br></pre></td></tr></table></figure>

<h1 id="获取、设置日期和延时"><a href="#获取、设置日期和延时" class="headerlink" title="获取、设置日期和延时"></a>获取、设置日期和延时</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date</span><br><span class="line"><span class="meta">#</span><span class="bash">output: Thu Aug  1 09:50:07  2019</span></span><br></pre></td></tr></table></figure>

<p>获取秒数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date +%s</span><br><span class="line"><span class="meta">#</span><span class="bash">output: 1564653113</span></span><br></pre></td></tr></table></figure>

<p>获取星期</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date +%A #output: Sat</span><br><span class="line">date +%a #output: Saturday</span><br></pre></td></tr></table></figure>

<p>获取月</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">date +%B #output: Nov</span><br><span class="line">date +%b #output: November</span><br></pre></td></tr></table></figure>

<p>获取日</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date +%d #output：01</span><br></pre></td></tr></table></figure>

<p>固定日期格式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">date +"%Y%m%d%H%M%S" #output: 20190801192735</span><br><span class="line"></span><br><span class="line">date +"%Y %m %d %H %M %S" #output: 2019 08 01 19 28 35</span><br><span class="line"></span><br><span class="line">date +"%d %B %Y" #output:01 August 2019</span><br></pre></td></tr></table></figure>

<h1 id="函数和参数"><a href="#函数和参数" class="headerlink" title="函数和参数"></a>函数和参数</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function fname()</span><br><span class="line">&#123;</span><br><span class="line">statements;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">fname()</span><br><span class="line">&#123;</span><br><span class="line">statements;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fname()</span><br><span class="line">&#123;</span><br><span class="line">	echo $1,$2;  #访问参数1和参数2</span><br><span class="line">	echo "$@";   #以列表的方式一次性打印所有参数</span><br><span class="line">	echo "$*";	 #类似于$@,但是参数被作为实体</span><br><span class="line">	return 0;    #返回值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h1><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for i in $list;</span><br><span class="line">do </span><br><span class="line">	actions;</span><br><span class="line">done</span><br><span class="line"><span class="meta">#</span><span class="bash">或者</span></span><br><span class="line">for((i=0;i&lt;10;i++))</span><br><span class="line">&#123;</span><br><span class="line">	commands;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><p>用true作为循环条件能够产生无限循环。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">	conmmands;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="until循环"><a href="#until循环" class="headerlink" title="until循环"></a>until循环</h2><p>它的功能是一直执行循环知道给定的条件为真</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x=0;</span><br><span class="line">until [$x -eq 9]; # [$x -eq 9] is the condition</span><br><span class="line">do let x++;echo $x;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h1 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h1><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-eq</td>
<td>等于则为真</td>
</tr>
<tr>
<td>-ne</td>
<td>不等于则为真</td>
</tr>
<tr>
<td>-gt</td>
<td>大于则为真</td>
</tr>
<tr>
<td>-ge</td>
<td>大于则为真</td>
</tr>
<tr>
<td>-lt</td>
<td>小于则为真</td>
</tr>
<tr>
<td>-le</td>
<td>小于等于则为真</td>
</tr>
</tbody></table>
<ul>
<li>[-f $file_var] : 如果给定的变量包含正常的文件路径或文件名，则返回真。</li>
<li>[-x $var] : 如果给定的变量包含的文件可执行，则返回真</li>
<li>[-d $var] : 如果给定的变量包含的是目录，则返回真</li>
<li>[-e $var] : 如果给定的变量包含的文件存在，则返回真</li>
<li>[-c $var] : 如果给定的变量包含的是一个字符设备文件的路径，则返回真</li>
<li>[-b $var] : 如果给定的变量包含的是一个块设备的路径，则返回真</li>
<li>[-w $var] :如果给定的变量包含的文件可写，则返回真</li>
<li>[-r $var] : 如果给定的变量包含的文件可读，则返回真</li>
<li>[-L $var] : 如果给定的变量包含的是一个符号链接，则返回真</li>
</ul>
<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><p>使用字符串比较时，最好用双中括号，因为有时候采用单个中括号会产生错误，所以最好避开它们。</p>
<p>可以检查两个字符串</p>
<ul>
<li><code>[[ $str1 = $str2]]</code> : 当str1等于str2时，返回真，也就是说，str1和str2包含的文本是一模一样。</li>
<li><code>[[ $str1 == $str2]]</code>：这是检查字符串是否相等的另一种写法，也可以检查两个字符串是否不同。</li>
<li><code>[[ $str1 ！= $str2]]</code>：这是str1和str2不相同，则返回真。</li>
<li><code>[[$str1 &gt; $str2]]</code>: 如果str1的字母序比str2大，则返回真</li>
<li><code>[[$str1 &lt; $str2]]</code>: 如果str1的字母序比str2小，则返回真</li>
<li><code>[[-z $str1]]</code>: 如果str1包含的是空字符串，则返回真</li>
<li><code>[[-n $str1]]</code>: 如果str1包含的是非空字符串，则返回真</li>
</ul>
<h1 id="cat-命令"><a href="#cat-命令" class="headerlink" title="cat 命令"></a>cat 命令</h1><p>1.压缩空白行</p>
<p>文本中有多个空行需要被压缩成单个</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -s file</span><br></pre></td></tr></table></figure>

<p>2.将制表符显式^|</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -T file.py</span><br></pre></td></tr></table></figure>

<p>3.显示行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n lines.txt</span><br></pre></td></tr></table></figure>

<h1 id="文件查找与文件列表find"><a href="#文件查找与文件列表find" class="headerlink" title="文件查找与文件列表find"></a>文件查找与文件列表find</h1><p>find命令的工作方式如下：沿着文件层次结构向下遍历，匹配符合条件的文件，并执行相应的操作。</p>
<p>要列出当前目录及子目录下所有的文件和文件夹，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find base_path</span><br></pre></td></tr></table></figure>

<p>bash_path可以是任何位置，find会从改位置开始向下查找。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -print</span><br><span class="line"><span class="meta">#</span><span class="bash">打印文件和目录的列表</span></span><br></pre></td></tr></table></figure>

<p>. 指定当前目录， .. 指定父目录。</p>
<ul>
<li>-print指明打印出匹配文件的文件名（路径）。当使用-print时，’\n’作为用于分隔文件的定界符。</li>
<li>-print0指明使用’\0’作为定界符来打印每一个匹配的文件名，当文件名中包含换行符时</li>
</ul>
<p><strong>根据文件名或正则表达式匹配搜索</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name ".txt" -print</span><br><span class="line"><span class="meta">#</span><span class="bash">查找当前目录中所有的txt文件</span></span><br></pre></td></tr></table></figure>

<p>匹配多个条件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . \( -name "*.txt" -o -name "*.pdf" \) -print</span><br><span class="line"><span class="meta">#</span><span class="bash">查找当前目录中所有txt和pdf文件</span></span><br></pre></td></tr></table></figure>

<p>-iregex用于忽略正则表达式的大小写</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find . -iregex ".*\(\.py\|\.sh\)$"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">搜索py（无视大小写）和sh（无视大小写）的后缀的文件，</span></span><br></pre></td></tr></table></figure>

<p>否定参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . ! -name ".txt" -print</span><br><span class="line"><span class="meta">#</span><span class="bash">查找除了txt之外的文件</span></span><br></pre></td></tr></table></figure>

<p>目录深度搜索</p>
<ul>
<li>mindepth 最小深度</li>
<li>maxdepth 最大深度</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -mindepth 2 *</span><br></pre></td></tr></table></figure>

<p>根据文件类型搜索</p>
<p>linux文件类型包括普通文件、目录、字符设备、块设备、符号链接、硬链接、套接字以及FIFO</p>
<p>-type可以对文件搜索进行过滤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type d -print</span><br></pre></td></tr></table></figure>

<p>根据文件时间进行搜索</p>
<ul>
<li>访问时间（-atime）：用户最近一次访问文件的时间</li>
<li>修改时间（-mtime）：文件内容最后一次被修改的时间</li>
<li>变化时间（-ctime）：文件元数据最后一次改变的时间</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印出在最近七天被访问过的所有文件：</span></span><br><span class="line">find . -type f -atime -7 -print</span><br><span class="line"><span class="meta">#</span><span class="bash">打印出在七天前被访问过的所有文件：</span></span><br><span class="line">find . -type f -atime 7 -print</span><br><span class="line"><span class="meta">#</span><span class="bash">打印出访问时间超过七天的所有文件:</span></span><br><span class="line">find . -type f -atime +7 -print</span><br></pre></td></tr></table></figure>

<p>按分钟作为计量单位的</p>
<ul>
<li>-amin(访问时间)</li>
<li>-mmin（修改时间）</li>
<li>-cmin（变化时间）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印出访问时间超过7分钟的所有文件</span></span><br><span class="line">find . -type f -amin +7 -print</span><br></pre></td></tr></table></figure>

<p>-newer参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">查找比参考文件更新的所有文件</span></span><br><span class="line">find . -type -newer file.txt -print</span><br></pre></td></tr></table></figure>

<p>基于文件大小的搜索</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -size +2k</span><br><span class="line"><span class="meta">#</span><span class="bash">大于2KB的文件</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -size -2k</span><br><span class="line"><span class="meta">#</span><span class="bash">小于2kb的文件</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -size 2k</span><br><span class="line"><span class="meta">#</span><span class="bash">大于等于2kB的文件</span></span><br></pre></td></tr></table></figure>

<p>-delete可用来删除find查找的匹配文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">删除当前目录下所有的.swp文件</span></span><br><span class="line">find . -type f -name "*.swp" -delete</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印出权限为644的文件</span></span><br><span class="line">find . -type f -perm 644 -print</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打印出用户slynux拥有的所有文件</span></span><br><span class="line">find . -type f -user alynux -print</span><br></pre></td></tr></table></figure>

<p> 结合find执行命令或动作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -user root -exec chown slynux&#123;&#125; \;</span><br></pre></td></tr></table></figure>

<h1 id="xargs命令"><a href="#xargs命令" class="headerlink" title="xargs命令"></a>xargs命令</h1><p>xargs命令把从stdin接收到的数据重新格式化，再将其作为参数提供给其他命令</p>
<p>将多行输入转换成单行输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example.txt | xarga #将输出的文件内容，输出内容转换为一行</span><br></pre></td></tr></table></figure>

<p>将单行输入转换成多行输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat example.txt | xargs -n 3 #将输出的文件内容，输出内容转换为一行(按照空格为定界符)</span><br></pre></td></tr></table></figure>

<p>使用-d选项为输入指定一个定制的定界符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "splitXsplitXsplitXsplitXsplit" | xargs -d X</span><br><span class="line"><span class="meta">#</span><span class="bash">output: split split split split</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo "splitXsplitXsplitXsplitXsplit" | xargs -d X -n 2</span><br><span class="line"><span class="meta">#</span><span class="bash">output:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">split split</span></span><br><span class="line"><span class="meta">#</span><span class="bash">split split</span></span><br></pre></td></tr></table></figure>

<h1 id="校验与核实"><a href="#校验与核实" class="headerlink" title="校验与核实"></a>校验与核实</h1><p>我们从网上下载大文件，经常要求我们校验文件完整性，将从软件中带的MD5和下载后文件生成的MD5进行比较，一样就表示文件完整，否则反之。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">md5sum script.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">output md5sum是32个字符的十六进制串</span></span><br><span class="line">4556bd00d254115c92fb55169e1567ae  script.sh</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">md5sum file1 file2 file3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">[checksum1] file1</span></span><br><span class="line"><span class="meta">#</span><span class="bash">[checksum1] file2</span></span><br><span class="line"><span class="meta">#</span><span class="bash">[checksum1] file3</span></span><br></pre></td></tr></table></figure>

<p>生成md5文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">md5sum file &gt; file_sum.md</span><br><span class="line"></span><br><span class="line">md5su -c file_sum.md # 注意file_sum.md和待检验的文件放在同一目录中</span><br></pre></td></tr></table></figure>

<h1 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h1><p>sort命令能够帮助我们对文本文件和stdin进行排序（按行进行排序）</p>
<h2 id="example"><a href="#example" class="headerlink" title="example"></a>example</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cat file_sum.md5</span><br><span class="line"><span class="meta">#</span><span class="bash">output: 4556bd00d254115c92fb55169e1567ae  script.sh</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">########################################################</span></span></span><br><span class="line"></span><br><span class="line">cat script.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">output: </span></span><br><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line">for i in &#123;1..20&#125;;</span><br><span class="line">do </span><br><span class="line">echo $i;</span><br><span class="line">done;</span><br><span class="line"><span class="meta">#</span><span class="bash">djisjs</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#######################################################</span></span></span><br><span class="line"></span><br><span class="line">sort file_sum.md5 script.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">output:</span></span><br><span class="line">4556bd00d254115c92fb55169e1567ae  script.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">djisjs</span></span><br><span class="line">do </span><br><span class="line">done;</span><br><span class="line">echo $i;</span><br><span class="line">for i in &#123;1..20&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">可以看出上面输出将两个文件的内容进行了合并，并按照按照行的首字符进行了排序</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure>

<p>按照数字进行排序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -n file.txt</span><br></pre></td></tr></table></figure>

<p>按照逆序进行排序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -r file.txt</span><br></pre></td></tr></table></figure>

<p>按月份进行排序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -M months.txt</span><br></pre></td></tr></table></figure>

<p>如果需要合并两个排过序的文件，而且不需要对合并后的文件再进行排序，可以使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -m sorted1 sorted2</span><br></pre></td></tr></table></figure>

<p>按列进行排序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat data.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">output:</span></span><br><span class="line">1 mac       2000</span><br><span class="line">2 winxp     4000</span><br><span class="line">3 bsd       1000</span><br><span class="line">4 linux     1000</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">依据第1列，以逆序形式排序 k:指定了排序按照哪一个键（key)来进行， r:sort命令按照逆序进行排序</span></span><br><span class="line">sort -nrk 1 data.txt</span><br><span class="line"><span class="meta">#</span><span class="bash">output:</span></span><br><span class="line">4	linux	1000</span><br><span class="line">3	bsd     1000</span><br><span class="line">2	winxp   4000</span><br><span class="line">1	mac     2000</span><br></pre></td></tr></table></figure>

<p>-b选项</p>
<p>用于忽略文件中的前导白字符，</p>
<p>-d选项</p>
<p>用于指明以字典序进行排序</p>
<h1 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h1><p>uniq命令通过消除复杂内容，从给定输入中（stdin或命令行参数文件）找出单一的行，它也可以用来找出输入中出现的复杂行，uniq只能用于排过序的数据输入。</p>
<p>uniq命令通过消除复杂内容，从给定输入中（stdin或命令行参数文件）找出单一的行，它也可以用来找出输入中出现的复杂行，uniq只能用于排过序的数据输入。</p>
<h1 id="分割文件和数据"><a href="#分割文件和数据" class="headerlink" title="分割文件和数据"></a>分割文件和数据</h1><h2 id="spilt"><a href="#spilt" class="headerlink" title="spilt"></a>spilt</h2><p>生成一个大小为100KB的测试文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero bs=100k count=1 of=data.file</span><br></pre></td></tr></table></figure>

<p>上面的命令会创建一个伪100KB而文件内容全部是0的文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将文件分割成多个更小的文件</span></span><br><span class="line">spilt -b 10k data.file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">将会生成很多文件 xaa xba xac xad ..........</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">split -b 10k data.file -d -a 4</span><br><span class="line"><span class="meta">#</span><span class="bash">-d 生成文件名是以数据进行结尾</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-a length就可指定后缀长度</span></span><br></pre></td></tr></table></figure>

<p>如果不想按照数据块大小进行分割，而是需要根据行数来分割文件的话，可以使用<code>-l</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split -l 10 data.file</span><br></pre></td></tr></table></figure>

<h2 id="cspilt"><a href="#cspilt" class="headerlink" title="cspilt"></a>cspilt</h2><p>cspilt是spilt工具的一个变体，spilt只能够根据大小或行数分割文件，而cspilt可以根据文本自身的特点进行分割，是否存在某个单词或文本内容都作为分割文件的条件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat server.log</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">output:</span><br><span class="line">SERVER-1</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">SERVER-2</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">SERVER-3</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br><span class="line">[connection] 192.0.0.1 xxxxx</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cspilt server.log /SERVER/ -n 2 -s &#123;*&#125; -f server -b "%02d.log" ;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls</span><br><span class="line">server01.log server02.log server03.log server.log</span><br></pre></td></tr></table></figure>

<ul>
<li><p>/SERVER用来匹配某一行，分割过程即从此处开始</p>
</li>
<li><p>/[REGEX]/表示文本样式。包括从当前行（第一行）直到（但不包括）包含“SERVER”的匹配行</p>
</li>
<li><p>{*}表示根据匹配重复执行分割，直到文件末尾为止。可以用{整数}的形式来指定分割执行的次数。</p>
</li>
<li><p>-s 使命令进入静默模式，不打印其他信息</p>
</li>
<li><p>-n指定分割后的文件名后缀的数字个数，</p>
</li>
<li><p>-f 指定分割后的文件名后缀</p>
</li>
<li><p>-b 指定后缀格式。例如“%02d.log”，类似于C语言中printf的参数格式。在这里文件名=前缀+后缀=server + %02d.log</p>
</li>
</ul>
<h2 id="根据扩展名切分文件名"><a href="#根据扩展名切分文件名" class="headerlink" title="根据扩展名切分文件名"></a>根据扩展名切分文件名</h2><p>获取文件名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file_jpg="sample.jpg"</span><br><span class="line">name=$&#123;file_jpg%.*&#125;</span><br><span class="line">echo File name is :$name</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">output:</span><br><span class="line"></span><br><span class="line">File name is: sample</span><br></pre></td></tr></table></figure>

<p>获取文件扩展名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extension=$&#123;file_jpg#*.&#125;</span><br><span class="line">echo Extension is:$extension</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">output:</span><br><span class="line">echo Extension is:jpg</span><br></pre></td></tr></table></figure>

<p>${VAR%.*}</p>
<ul>
<li>从$VARIABLE中删除位于%左侧的通配符（在前例中是.*）所匹配的字符串。通配符从右向左进行匹配。</li>
<li>给VAR赋值，VAR=sample.jpg.那么，通配符从右向左就会匹配到.jpg，因此，从$VAR中删除匹配结果，机会得到输出“sample”.</li>
</ul>
<p>%属于非贪婪操作，它从右到左找出匹配通配符的最短结果，还有另一个操作符%%，这个操作符与%相似，但行为模式却是贪婪的，这意味着它会匹配符合条件的最长的字符串。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Var=hack.fun.book.txt</span><br><span class="line"></span><br><span class="line">echo $&#123;Var%.*&#125;</span><br><span class="line"></span><br><span class="line">output:hack.fun.book</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##############################</span></span></span><br><span class="line"></span><br><span class="line">echo $&#123;Var%%.*&#125;</span><br><span class="line">output:hack</span><br></pre></td></tr></table></figure>

<p>${VAR#*.}</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">VAR=hack.fun.book.txt</span><br><span class="line"></span><br><span class="line">echo $&#123;VAR#*.&#125;</span><br><span class="line">output:fun.book.txt</span><br><span class="line"></span><br><span class="line">echo $&#123;VAR##*.&#125;</span><br><span class="line">output:txt</span><br></pre></td></tr></table></figure>

<p>example</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">URL="www.googl.com"</span><br><span class="line"></span><br><span class="line">echo $&#123;URL%.*&#125; #output:www.google</span><br><span class="line">echo $&#123;URL%%.*&#125; #output:www</span><br><span class="line">echo $&#123;URL#*.&#125; #output:google.com</span><br><span class="line">echo $&#123;URL##*.&#125; #com</span><br></pre></td></tr></table></figure>



<h1 id="批量重命名和移动"><a href="#批量重命名和移动" class="headerlink" title="批量重命名和移动"></a>批量重命名和移动</h1><h2 id="example-1"><a href="#example-1" class="headerlink" title="example"></a>example</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件名rename.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">用途： 重命名.jpg和.png</span></span><br><span class="line"></span><br><span class="line">count=1;</span><br><span class="line">for img in *.log *.png</span><br><span class="line">do</span><br><span class="line">new=image-$count.$&#123;img##*.&#125;</span><br><span class="line"></span><br><span class="line">mv "$img" "$new" 2&gt; /dev/null</span><br><span class="line"><span class="meta">#</span><span class="bash">2&gt; /dev/null 有时候，我并不想看到任何输出，我只想看到这条命令运行是不是正常，那么我们可以同时禁止标准输出和标准错误的输出,比如上面这个命令有任何错误信息都不会在终端上打印了</span></span><br><span class="line"></span><br><span class="line">if [$? -eq 0] #$? 判断最后的命令的推出状态，0表示没有错误，其他任何值表明有错误</span><br><span class="line">then</span><br><span class="line">echo "Renaming $img to $new"</span><br><span class="line">let count++</span><br><span class="line"></span><br><span class="line">fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>执行：</p>
<p>./rename.sh</p>
<p>Renaming hack.jpg to image-1.jpg</p>
<p>Renaming new.jpg to image-2.jpg</p>
<p>Renaming next.jpg to image-3.jpg</p>
<p>该脚本将当前目录下所有的.jpg和.png文件重命名,新文件的格式image-1.jpg、image-2.jpg、image-3.jpg、image-4.png等</p>
<h1 id="拼写检查与词典操作"><a href="#拼写检查与词典操作" class="headerlink" title="拼写检查与词典操作"></a>拼写检查与词典操作</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件名：checkwork.sh</span></span><br><span class="line">word=$1</span><br><span class="line">grep "^$1$" /usr/share/dict/british-english -q</span><br><span class="line"><span class="meta">#</span><span class="bash">在grep中，^标记着单词的开始，$标记着单词的结束，-q禁止产生任何输出</span></span><br><span class="line"></span><br><span class="line">if [$? -eeq 0]; then</span><br><span class="line">	echo $word is a dictionary word;</span><br><span class="line">else</span><br><span class="line">	echo $word is not dictionary word;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./checkword.sh ful</span><br><span class="line"></span><br><span class="line">ful is not a dictionary word</span><br><span class="line"></span><br><span class="line">./checkword.sh fool</span><br><span class="line"></span><br><span class="line">fool is a dictionary word</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件名：aspellcheck.sh</span></span><br><span class="line"></span><br><span class="line">word=$1</span><br><span class="line">output=`echo \"$word\" | aspell list`</span><br><span class="line">if [-z $output];then</span><br><span class="line"><span class="meta">#</span><span class="bash">-z用于确定<span class="variable">$output</span>是否为空</span></span><br><span class="line">	echo $word is a dictionary word;</span><br><span class="line">else</span><br><span class="line">	echo $word is not a dictionary word;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>当给定的输入不是一个词典单词，aspell list命令产生输出文本，反之则不产生任何输出。 -z用于确认$output是否为空</p>
<h1 id="交互输入自动化"><a href="#交互输入自动化" class="headerlink" title="交互输入自动化"></a>交互输入自动化</h1><p>下写一个读取交互式输入的脚本，然后用这个脚本进行自动化的演示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件名：interactive.sh</span></span><br><span class="line">read -p "Enter number:" no;</span><br><span class="line">read -p "Enter name:" name</span><br><span class="line">echo You have entered $no,$name;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo "1\nhello\n" | ./interactive.sh</span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line">You have entered 1,hello</span><br></pre></td></tr></table></figure>

<p>用expect实现自动化</p>
<p>expect等待特定的输入提示，通过检查输入提示来发送数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /usr/bin/expect</span></span><br><span class="line"><span class="meta">#</span><span class="bash">文件名：automate_expect.sh</span></span><br><span class="line"></span><br><span class="line">spawn ./interactive.sh</span><br><span class="line">expect "Enter number:"</span><br><span class="line">send "1\n"</span><br><span class="line">expect "Enter name:"</span><br><span class="line">send "hello\n"</span><br><span class="line">expect eof</span><br></pre></td></tr></table></figure>

<ul>
<li>spawn参数指定需要自动化哪个命令；</li>
<li>expect参数提供需要等待的消息；</li>
<li>send是要发送的消息</li>
<li>expect eof指明命令交互结束</li>
</ul>
<h1 id="文件处理"><a href="#文件处理" class="headerlink" title="文件处理"></a>文件处理</h1><h2 id="生成任意大小的文件"><a href="#生成任意大小的文件" class="headerlink" title="生成任意大小的文件"></a>生成任意大小的文件</h2><p>创建特定大小的大文件最简单的方法就是利用dd命令。dd命令会克隆给定的输入内容，然后将一模一样的一份副本写入到输出。stdin、设备文件、普通文件等都可作为输入，stdout、设备文件、普通文件等也作为输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero of=junk.data bs=1M count=1</span><br></pre></td></tr></table></figure>

<p>该命令会创建一个1MB大小的文件junk.data。来看下命令参数：if代表输入文件（input），of代表输出文件（output），bs代表以字节为单位的块大小（Block size），count代表被复制的块数</p>
<p>/dev/zero是一个字符设备，它会不断返回0值字符（\0）</p>
<h2 id="文本文件的交集与差集"><a href="#文本文件的交集与差集" class="headerlink" title="文本文件的交集与差集"></a>文本文件的交集与差集</h2><p>comm命令可用于两个文件之间的比较。</p>
<p>交集：打印出两个文件所共有的行</p>
<p>求集：打印出指定文件所包含的且不相同的那些行</p>
<p>差集：打印出包含在文件A中，但不包含在其他指定文件中的那些行</p>
<p>comm命令必须使用排过序的文件作为输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cat A.txt</span><br><span class="line">apple</span><br><span class="line">orange</span><br><span class="line">gold</span><br><span class="line">silver</span><br><span class="line">steel</span><br><span class="line">iron</span><br><span class="line"></span><br><span class="line">cat B.txt</span><br><span class="line">orange</span><br><span class="line">gold</span><br><span class="line">cookies</span><br><span class="line">carrot</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sort A.txt -o A.txt;sort B.txt -o B.txt</span><br><span class="line"></span><br><span class="line">comm A.txt B.txt</span><br><span class="line">apple	</span><br><span class="line">		carrot</span><br><span class="line">		cookies</span><br><span class="line">				gold</span><br><span class="line">iron</span><br><span class="line">				orange</span><br><span class="line">silver</span><br><span class="line">steel</span><br></pre></td></tr></table></figure>

<p>选项：</p>
<ul>
<li>-1从输出中删除第一列</li>
<li>-2从输出中删除第二列</li>
<li>-3从输出中删除第三列</li>
</ul>
<h2 id="查找并删除重复文件"><a href="#查找并删除重复文件" class="headerlink" title="查找并删除重复文件"></a>查找并删除重复文件</h2><p>xxx</p>
<p>创建长路劲目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir dirpath</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [-e /home/slynux];then</span><br><span class="line"><span class="meta">#</span><span class="bash">如果目录存在，返回真</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mdkir /home 2&gt; /dev/null</span><br><span class="line">mdkri /home/slynux 2&gt; /dev/null</span><br><span class="line">mdkri /home/slynux/test 2&gt; /dev/null</span><br><span class="line">mdkri /home/slynux/test/hello 2&gt; /dev/null</span><br><span class="line">mdkri /home/slynux/test/hello/child 2&gt; /dev/null</span><br></pre></td></tr></table></figure>

<p>如果遇到“Directory exists”这种错误，该命令会被忽略，错误信息通过2&gt;被重定向到/dev/null</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p  /home/slynux/test/hello/child</span><br></pre></td></tr></table></figure>

<p>这条命令可以替代前面5条命令，它会忽略所有有已存在的目录，同时创建缺失的部分。</p>
<h1 id="文件权限、所有权"><a href="#文件权限、所有权" class="headerlink" title="文件权限、所有权"></a>文件权限、所有权</h1><p>linux中文件类型：</p>
<ul>
<li>“-” 普通文件</li>
<li>“d” 目录</li>
<li>“c” 字符设备</li>
<li>“b” 块设备</li>
<li>“l” 符号链接</li>
<li>“s” 套接字</li>
<li>“p” 管道</li>
</ul>
<p>u = 指定用户权限</p>
<p>g = 指定用户组权限</p>
<p>o = 指定其他实体权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod o+x filename #给其他实体权限增加可执行权限</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x filename #给（用户、用户组、其他用户）增加可执行权限</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a-x filename #删除（用户、用户组、其他用户）增加可执行权限</span><br></pre></td></tr></table></figure>

<p>r– = 4</p>
<p>-w- = 2</p>
<p>–x = 1</p>
<p>rwx = 4 +２＋１＝７</p>
<p>rw = 4 +２＝６</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod 764 filename</span><br><span class="line"><span class="meta">#</span><span class="bash">为用户增加读写执行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">为用户组增加读写</span></span><br><span class="line"><span class="meta">#</span><span class="bash">为其他用户增加写执行</span></span><br></pre></td></tr></table></figure>

<h2 id="更改所有权"><a href="#更改所有权" class="headerlink" title="更改所有权"></a>更改所有权</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown user.group filename</span><br><span class="line"><span class="meta">#</span><span class="bash">变更文件所有权为user，user是用户，group是组</span></span><br></pre></td></tr></table></figure>

<h3 id="以递归的方式设置权限"><a href="#以递归的方式设置权限" class="headerlink" title="以递归的方式设置权限"></a>以递归的方式设置权限</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 . -R</span><br></pre></td></tr></table></figure>

<p>选项-R指定以递归的方式修改权限，“.”指定当前工作目录</p>
<h3 id="以递归的方式设置所有权"><a href="#以递归的方式设置所有权" class="headerlink" title="以递归的方式设置所有权"></a>以递归的方式设置所有权</h3><p>用chown命令结合-R就可以以递归的方式设置所有权</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown user.group . -R</span><br></pre></td></tr></table></figure>

<h3 id="以不同的用户运行可执行文件"><a href="#以不同的用户运行可执行文件" class="headerlink" title="以不同的用户运行可执行文件"></a>以不同的用户运行可执行文件</h3><p>一些可执行文件需要以不同的用户身份（除启动该文件的当前用户之外的用户），用文件路径来执行（如./executable_name）。有一个叫做setuid的特殊文件权限，他允许其他用户以文件所有者的身份来执行文件</p>
<p>首先将该文件的所有权替换为该用户，这项操作每次都会执行，使改用户能以文件所有者的身份登入。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod +s executable_file</span><br><span class="line">chmod root.root executable_file</span><br><span class="line">chmod +s executable_file</span><br><span class="line">./executable_file</span><br></pre></td></tr></table></figure>

<p>setuid的使用不是无限制的。为了确保安全，它只能应用在Linux ELF格式二进制文件上，而不能用于脚本文件。</p>
<h2 id="创建不可修改文件"><a href="#创建不可修改文件" class="headerlink" title="创建不可修改文件"></a>创建不可修改文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr +i file #将一个文件设置为不可修改</span><br></pre></td></tr></table></figure>

<p>使用rm file也不可使用删除文件</p>
<p>如果需要使文件重新可写，可以移除不可修改属性：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chattr -i file</span><br></pre></td></tr></table></figure>

<p>批量生成空白文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for name in &#123;1..100&#125;.txt</span><br><span class="line">do</span><br><span class="line">touch $name</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>touch -a 只更改文件访问时间</p>
<p>touch -m 只更改文件内容修改时间</p>
<p>除了将时间更改为当前时间，我们还能够为时间戳指定特定的时间和日期：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch -d "Fri Jun 25 20:50:14 IST 1999" filename</span><br></pre></td></tr></table></figure>

<p>-d使用的日期串不一定总是以同样的格式呈现，-d可以接受任何的目标标准日期格式。</p>
<h2 id="查看文件类型信息"><a href="#查看文件类型信息" class="headerlink" title="查看文件类型信息"></a>查看文件类型信息</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file filename</span><br></pre></td></tr></table></figure>



<h2 id="显示文件内容"><a href="#显示文件内容" class="headerlink" title="显示文件内容"></a>显示文件内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat filename</span><br></pre></td></tr></table></figure>

<h3 id="打印文件的前10行和后10行"><a href="#打印文件的前10行和后10行" class="headerlink" title="打印文件的前10行和后10行"></a>打印文件的前10行和后10行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">head file #默认前10行</span><br><span class="line">tail file #默认后10行</span><br><span class="line"></span><br><span class="line">head -n 4 file #打印前4行</span><br><span class="line"></span><br><span class="line">head -n -N file #打印除了最后N行之外的所有行</span><br></pre></td></tr></table></figure>

<h3 id="统计文件的行数、单词数、字符数"><a href="#统计文件的行数、单词数、字符数" class="headerlink" title="统计文件的行数、单词数、字符数"></a>统计文件的行数、单词数、字符数</h3><p>使用wc工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">统计行数</span></span><br><span class="line">wc -l file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">统计file文件的行数</span></span><br><span class="line">cat file | wc -1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">统计单词书</span></span><br><span class="line">wc -w file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">统计字符数</span></span><br><span class="line">wc -c  file</span><br><span class="line">cat file |wc -c</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">它会打印出文件的函数、单词数、字符数，彼此之间用制表符分隔</span></span><br><span class="line">wc file</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">打印最长行的长度</span></span><br><span class="line">wc file -L</span><br></pre></td></tr></table></figure>

<h2 id="打印目录树"><a href="#打印目录树" class="headerlink" title="打印目录树"></a>打印目录树</h2><p>tree命令（这个命令需要自行安装）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree 目录</span><br></pre></td></tr></table></figure>
<h1 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a>文本操作</h1><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><table>
<thead>
<tr>
<th>正则表达式</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>行起始标记</td>
<td>^tux匹配以tux起始的行</td>
</tr>
<tr>
<td>$</td>
<td>行尾标记</td>
<td>tux$匹配以tux结尾的行</td>
</tr>
<tr>
<td>.</td>
<td>匹配任意一个字符</td>
<td>yua. 可以匹配yuan或者yua1</td>
</tr>
<tr>
<td>[]</td>
<td>匹配[字符]之中的任意的一个字符</td>
<td>coo[kl]匹配cook或cool</td>
</tr>
<tr>
<td>[^]</td>
<td>匹配[^]之外的任意一个字符</td>
<td>9[^01]匹配92、93，但是不匹配91或90</td>
</tr>
<tr>
<td>[-]</td>
<td>匹配[]中指定范围内任意一个字符</td>
<td>[1-5]匹配从1~5的任意一个数字</td>
</tr>
<tr>
<td>?</td>
<td>匹配之前的项一次或0次</td>
<td>colou?r匹配color或colour,但是不能匹配colouur</td>
</tr>
<tr>
<td>+</td>
<td>匹配之前的项1次或多次</td>
<td>Rollno-9+匹配ROLLno-99、Rollno-9，但是不能匹配Rollno-</td>
</tr>
<tr>
<td>*</td>
<td>匹配之前的项0次或多次</td>
<td>co*l匹配cl、col、coool等</td>
</tr>
<tr>
<td>()</td>
<td>创建一个用于匹配的字串</td>
<td>ma(tri)?匹配max或maxtrix</td>
</tr>
<tr>
<td>{n}</td>
<td>匹配之前的项n次</td>
<td>[0-9]{3}匹配任意一个三位数，[0-9]{3}</td>
</tr>
<tr>
<td>{n,}</td>
<td>之前的项至少需要匹配n次</td>
<td>[0-9]{2,}匹配任意一个两位或更多位的数字</td>
</tr>
<tr>
<td>{n,m}</td>
<td>指定之前的项所必需匹配的最小次数和最大次数</td>
<td>[0-9]{2,5}匹配从两位数到五位数之间的任意一个数字</td>
</tr>
<tr>
<td>|</td>
<td>交替——–匹配|两边的任意一项</td>
<td>Oct (1st | 2nd)匹配Oct lst或Oct 2nd</td>
</tr>
<tr>
<td>\</td>
<td>转义符可以将上面介绍的特殊字符进行转义</td>
<td>a\ .b匹配a.b,但不能匹配ajb，通过在. 之间加上前缀,从而忽略了.的特殊意义</td>
</tr>
</tbody></table>
<h2 id="匹配文本中所有单词"><a href="#匹配文本中所有单词" class="headerlink" title="匹配文本中所有单词"></a>匹配文本中所有单词</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( ?[a-zA-Z]+ ?)</span><br></pre></td></tr></table></figure>

<ul>
<li>“?”用于匹配单词前后可能出现的空格。[a-zA-Z]+代表一个或多个字母（a<del>z和A</del>Z）.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;</span><br><span class="line">或者</span><br><span class="line">[[:digit:]]&#123;1,3&#125;\.[[:digit:]]&#123;1,3&#125;\.[[:digit:]]&#123;1,3&#125;\.[[:digit:]]&#123;1,3&#125;</span><br></pre></td></tr></table></figure>

<p>[0-9]或者[:digit:]匹配数字0~9。{1，3}匹配1到3个数字，.匹配”.”。</p>
<h2 id="用grep在文件中搜索文本"><a href="#用grep在文件中搜索文本" class="headerlink" title="用grep在文件中搜索文本"></a>用grep在文件中搜索文本</h2><p>在文件中搜索一个单词</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep match_pattern filename</span><br></pre></td></tr></table></figure>

<p>会输出包含单词的所在行</p>
<p>命令会返回包含给定match_pattern的文本行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e "this is a word\nnext line" | grep word</span><br></pre></td></tr></table></figure>

<p>一个grep命令也可以对多个文件进行搜索：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "match_text" file1 file2 file3 ..</span><br></pre></td></tr></table></figure>

<p>用–color选项可以在输出行中重点标记出匹配到的单词：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep word filename --color=auto</span><br></pre></td></tr></table></figure>

<p>grep也可以使用正则表达式，也可以使用默认允许正则表达式的grep命令—–egrep</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -E "[a-z]+"</span><br><span class="line">或者</span><br><span class="line">egrep "[a-z]+"</span><br></pre></td></tr></table></figure>

<p>为了只输出文件中匹配的文本部分，可以使用选项-o</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo this is a line.|grep -o -E "[a-z]+\." #output line</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -v match_pattern file #打印除包含match_pattern的行之外的所有行</span><br><span class="line">选项-v可以将匹配结果进行反转</span><br></pre></td></tr></table></figure>

<p>统计文件或者文本中包含匹配字符的行数：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -c "text" filename #10</span><br></pre></td></tr></table></figure>

<p>需要注意的是-c只是统计匹配行的数量，并不是匹配的次数。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e "1 2 3  4\nhello\n5 6" | egrep -c "[0-9]"  #输出2</span><br></pre></td></tr></table></figure>

<p>为了文件中统计匹配项的数量，可以使用下面的技巧：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e "1 2 3  4\nhello\n5 6" | egrep -c "[0-9]" | wc -l #output:6</span><br></pre></td></tr></table></figure>

<p>打印除包含匹配字符串的行数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "match_pattern" -n sample1.txt</span><br></pre></td></tr></table></figure>

<p>递归搜索文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "text" . -R -n</span><br></pre></td></tr></table></figure>

<p>选项-i可以使匹配样式不考虑字符的大小写，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo hello world | grep -i "HELLO" #output:hello</span><br></pre></td></tr></table></figure>

<p>用grep匹配多个样式</p>
<p>在进行匹配的时候只指定一个样式。然而。我们可以用选项-e来指定多个匹配样式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo this is a line of text | grep -e "this" -e "line" -o #this line</span><br></pre></td></tr></table></figure>

<p>在grep搜索中包括或排除文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">递归搜索所有的.c和.cpp文件</span></span><br><span class="line">grep "main()" . -r --include *.(c,cpp) </span><br><span class="line"><span class="meta">#</span><span class="bash">排除所有的README文件：</span></span><br><span class="line">grep "main()" . -r --include "README"</span><br><span class="line"><span class="meta">#</span><span class="bash">如果需要从文件中读取所需排除的文件列表，使用--exclude-from FILE</span></span><br><span class="line">grep "main()" . -r -exclude-from FILE</span><br></pre></td></tr></table></figure>

<p>项目-q（grep的静默输出）</p>
<p>在静默模式下，grep命令不会像标准输出打印任何输出。它仅是运行命令。然后根据命令执行成功与否返回退出状态</p>
<h2 id="测试文件是否包含的文件内容"><a href="#测试文件是否包含的文件内容" class="headerlink" title="测试文件是否包含的文件内容"></a>测试文件是否包含的文件内容</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">判断参数个数</span></span><br><span class="line">if [$# -ne 2];</span><br><span class="line">then</span><br><span class="line">echo "$0 match_text filename"</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">match_text=$1 #第一个参数</span><br><span class="line">filename=$2 #第二个参数</span><br><span class="line"></span><br><span class="line">grep -q $match_text $filename</span><br><span class="line"></span><br><span class="line">if [$? -eq 0];then</span><br><span class="line">echo "The text exists in the file"</span><br><span class="line">eles</span><br><span class="line">echo "Text does not exist in the file"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>打印出匹配文本之前或之后的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "xxx" -A 3 #打印查找的结果后的前3行</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "xxx" -B 3 #打印查找的结果后的后3行</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep "xxx" -C 3 #打印查找的结果之前以及之后的3行，使用-c选项</span><br></pre></td></tr></table></figure>

<h2 id="用cut按列切分文件"><a href="#用cut按列切分文件" class="headerlink" title="用cut按列切分文件"></a>用cut按列切分文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -f 2,3 filenaem #第2列和第3列</span><br></pre></td></tr></table></figure>

<p>制表符是字段或列的默认定界符，没有定界符的行也会被打印出来，要避免打印出这种不包含定界符的行，则可以使用cut的-s选项</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat student_data.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NO	Name　Mark	percent</span><br><span class="line">1	11	  45       90</span><br><span class="line">2	22    49       98</span><br><span class="line">3	33    45       90</span><br></pre></td></tr></table></figure>

<h1 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h1><p>sed是stream editor的缩写。sed命令众所周知的一个用法是进行文本替换。</p>
<p>sed可以替换给定文本中的字符串。它可以利用正则表达式进行匹配。</p>
<p>sed是一种在线编辑器，它一次处理一行内容，处理时，把当前处理的行存储在临时缓冲区，，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用量定向存储输出。Sed主要用来自动编辑一个或多个文件，简化对文件的反复操作；编写转换程序等。</p>
<h2 id="定址"><a href="#定址" class="headerlink" title="定址"></a>定址</h2><p>定址用于决定对哪些行进行编辑。地址的形式可以是数字、正则表达式、或二者的结合。如果没有指定地址，sed将处理输入文件的所有行。</p>
<p>地址是一个数字，则表示行号；是“$”符号，则表示最后一行。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n '3p' datafile #只打印第三行</span><br></pre></td></tr></table></figure>

<p>值显示指定行范围的文件内容，例如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n '100,200p' mysql_slow_query.log</span><br></pre></td></tr></table></figure>

<p>地址是逗号分隔的，那么需要处理的地址是这两行之间的范围（包括这两行在内）。范围可以用数字、正则表达式、或二者的组合表示。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed '2,5d' datafile</span><br><span class="line"><span class="meta">#</span><span class="bash">删除第二到第五行</span></span><br><span class="line"></span><br><span class="line">sed '/My/,/You/d' datafile</span><br><span class="line"><span class="meta">#</span><span class="bash">删除包含“My”的行到包含<span class="string">"You"</span>的行之间的行</span></span><br><span class="line"></span><br><span class="line">sed '/My/,10d' datafile</span><br><span class="line"><span class="meta">#</span><span class="bash">删除包含“My”的行到第十行的内容</span></span><br></pre></td></tr></table></figure>



<p>3.命令与选项</p>
<p>sed命令告诉sed如何处理有地址指定的各输入行，如果没有指定地址则处理所有的输入行。</p>
<p>选项：</p>
<p>-n：使用安静（silent）模式。在一般sed的用法中，所有来自STDIN的数据一般都会被列出到终端上，加上-n参数后，则只有被sed处理的那些行才会被输出。</p>
<p>-e：指定在指令列模式上执行的命令文本。默认不需要指定，只有同时要执行多个命令文本时才需要显示的指定-e选项。</p>
<p>-f：同时要执行多个命令文本时，可以将这些命令文本写到一个文件中，然后通过-f filename 的方式使用。</p>
<p>-r：sed默认使用基础正则表达式语法，指定-r选项后使用扩展正则表达式语法。</p>
<p>-i：直接修改读取的文档，而不是输出到终端。</p>
<p>命令：</p>
<p>a：新增行，a的后面接字串，这些字串会被添加到匹配行的下面。</p>
<p>c：替换行，c的后面接字串，这些字符串替换掉匹配到的行。</p>
<p>d：删除行，删除匹配到的行。</p>
<p>i：插入行，i的后面接字符串，这些字符串会被插入到匹配行的上面</p>
<p>p：打印，将某些行输出，通常p会与参数-n一起使用这样会输出匹配到的行。</p>
<p>s：字符串替换，主要搭配正则表达式</p>
<h2 id="选项i"><a href="#选项i" class="headerlink" title="选项i"></a>选项i</h2><p>如果想要直接在原文件上进行修改（其实是先修改文件的内容，然后保存到原文件中，需要使用选项I：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i '1d' test.txt</span><br></pre></td></tr></table></figure>

<p>注意，应用-i选项后命令行上没有输出内容，但是源文件被更新了。</p>
<h2 id="新增行"><a href="#新增行" class="headerlink" title="新增行"></a>新增行</h2><p>a命令可以在匹配的行下面新增行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed 'la Hello world' test.txt	#在第一行下面新增一行，内容为“Hello world”</span><br><span class="line">sed '$a Hello world' test.txt	#在最后一行下面新增加一行，内容为"Hello world"</span><br><span class="line">sed '1,3a Hello world' test.txt #在第一行，第二行和第三行下面分别增加一行</span><br><span class="line"></span><br><span class="line">sed '1a Hello world!\nHello China!' test.txt #一次增加多行需要使用换行符</span><br></pre></td></tr></table></figure>

<h2 id="选项-e"><a href="#选项-e" class="headerlink" title="选项-e"></a>选项-e</h2><p>-e选项用来指定命令文本，如果只有一个命令文本时-e选项可以省略。如果要指定多个命令文本就需要使用-e选项。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e 'la xxx' -e '2a yyy' test.txt</span><br></pre></td></tr></table></figure>

<h2 id="插入行"><a href="#插入行" class="headerlink" title="插入行"></a>插入行</h2><p>i命令可以在匹配的行上面插入行，语法与新增行相同，只能新行在指定行的上面（与a命令的区别）：</p>
<h2 id="选项-f"><a href="#选项-f" class="headerlink" title="选项-f"></a>选项-f</h2><p>前面我们通过选项-e添加了多个命令文本，但是如果需要添加比较多的命令文本，使用选项-e就不合适了，应为把所有的命令文本全部写在命令行中会导致维护困难。我们可以把多个命令文本写入到文本文件中，然后通过-f选项进行引用。</p>
<h2 id="替换行"><a href="#替换行" class="headerlink" title="替换行"></a>替换行</h2><p>使用c命令可以轻松的进行整行替换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed '1c Hello world' test.txt 	#把第一行替换为“Hello world”</span><br><span class="line">sed '1,3c Hello world' test.txt #把第一行到第三行替换为“Hello world”</span><br></pre></td></tr></table></figure>

<p>注意，上图中命令把三行文本替换成一行文本</p>
<h2 id="字符串替换"><a href="#字符串替换" class="headerlink" title="字符串替换"></a>字符串替换</h2><p>与行替换不同，s命令只替换匹配到的内容（一般为字符串）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed 's/Hello/Hi' hello.txt   #把Hello 替换为Hi （只能匹配第一行）</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed 's/Hello/Hi/g' hello.txt #把匹配到的所有Hello都替换为Hi（匹配整个文件）</span><br></pre></td></tr></table></figure>

<p>我们还可以限制执行替换操作的行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed '2,3s/Hello/Hi/g' hello.txt  #只在第二行和第三行替换操作</span><br></pre></td></tr></table></figure>

<p>当然也可以通过替换来删除不需要的字符串：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed 's/hello//g' hello.txt  #删除字符串hello</span><br></pre></td></tr></table></figure>

<h2 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h2><p>sed所有的操作都是建立在行定位之上的。也就是说无论你要干什么，都要先找到（匹配）目标行。连最简单的删除‘1d’，也得先定位到第一行，然后才能删除，所以唯一能限制我们发挥sed能力的因素就是：如何匹配到期望的行？</p>
<p>p命令sed只输出哪些匹配到的行，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n '1p' test.txt</span><br></pre></td></tr></table></figure>

<h1 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h1><p><strong>结构</strong></p>
<p>awk “BEGIN {print “start”} pattern  {commands} END {print “end”}” file</p>
<p><strong>工作原理</strong></p>
<p>awk命令的工作方式如下所示：</p>
<p>（1）执行BEGIN{commands} 语句块中语句。</p>
<p>（2）从文件或stdin中读取一行，然后执行pattern{commands}。重复这个过程，直到文件全部被读取完毕。</p>
<p>（3）当读至读入流末尾是，执行END{commands}语句块。</p>
<p>BEGIN语句块在awk开始从输入流中读取行之前被执行，这是一个可选的语句块，诸如变量初始化、打印输出格式的表头等语句通常都可以写入BEGIN语句块。</p>
<p>END语句块和BEGIN语句块类似。END语句块在awk从输入流中读取完所有的行之后即被执行。像打印所有行的分析结果这类汇总信息，都是在END语句块中实现的常见任务。它也是一个可选的语句块。</p>
<p>最重要的部分就是pattern语句块中的通用命令。这个语句块同样是可选的。如果不提供该语句块，则默认执行{print}，即打印每一个读取到的行，都会执行这个语句块。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e "line1\nline2" | awk 'BEGIN &#123;print "Start"&#125; &#123;print&#125; END&#123;print "End"&#125;'</span><br></pre></td></tr></table></figure>

<p>输出如下：</p>
<p>Start</p>
<p>line1</p>
<p>line2</p>
<p>End</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo | awk '&#123;var1="v1";var2="v2";var3="v3"; \</span><br><span class="line">print var1,var2,var3;&#125;'</span><br></pre></td></tr></table></figure>

<p>v1 v2 v3</p>
<p><strong>特殊变量</strong></p>
<ul>
<li>NR：表示记录数量（number of records）,执行过程中国对应于当前行号。</li>
<li>NF：表示字段数量（number of fields），在执行过程中对应于当前行的字段数。</li>
<li>$0：这个变量包含执过程中当前行的文本内容。</li>
<li>$1：这个变量包含第一个字段的文本内容。</li>
<li>$2：这个变量包含第二个字段的文本内容。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo "line1 f2 f3\nline2 f4 f5\nline3 f6 f7" | \</span><br><span class="line">awk '&#123;print "Line no:"NR",No of fields:"NF, "$0="$0,"$1="$1,"$2="$2,"$3="$3&#125;'</span><br></pre></td></tr></table></figure>

<p>打印每一行第2和第3个字段:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk '&#123;print $3,$2&#125;' file</span><br></pre></td></tr></table></figure>

<p>统计文件中行数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk ‘END &#123;print NR&#125;’ file</span><br></pre></td></tr></table></figure>



<h1 id="对文件中的行、单词和字符进行迭代"><a href="#对文件中的行、单词和字符进行迭代" class="headerlink" title="对文件中的行、单词和字符进行迭代"></a>对文件中的行、单词和字符进行迭代</h1><h2 id="1-迭代文件中的每一行"><a href="#1-迭代文件中的每一行" class="headerlink" title="(1)迭代文件中的每一行"></a>(1)迭代文件中的每一行</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while read line;</span><br><span class="line">do </span><br><span class="line">echo $line</span><br><span class="line">done &lt; file.txt</span><br></pre></td></tr></table></figure>

<h2 id="2-迭代一行中的每一个单词"><a href="#2-迭代一行中的每一个单词" class="headerlink" title="(2)迭代一行中的每一个单词"></a>(2)迭代一行中的每一个单词</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for word in $line;</span><br><span class="line">do</span><br><span class="line">echo $word</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="3-迭代一个单词中每一字符"><a href="#3-迭代一个单词中每一字符" class="headerlink" title="(3)迭代一个单词中每一字符"></a>(3)迭代一个单词中每一字符</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for((i=0;i&lt;$&#123;#word&#125;;i++))</span><br><span class="line">do</span><br><span class="line">echo $(word:i:1);</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h1 id="按列合并文件"><a href="#按列合并文件" class="headerlink" title="按列合并文件"></a>按列合并文件</h1><h2 id="可以用paste命令实现按列拼接"><a href="#可以用paste命令实现按列拼接" class="headerlink" title="可以用paste命令实现按列拼接"></a>可以用paste命令实现按列拼接</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paste file1 file2 file3 ...</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat paste1.txt</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat paste2.txt</span><br><span class="line">slynux</span><br><span class="line">gnu</span><br><span class="line">bash</span><br><span class="line">back</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">paste paste1.txt paste2.txt</span><br><span class="line">1slynux</span><br><span class="line">2gnu</span><br><span class="line">3bash</span><br><span class="line">4hack</span><br><span class="line">5</span><br></pre></td></tr></table></figure>

<h2 id="打印文件或行中的第n个单词或列"><a href="#打印文件或行中的第n个单词或列" class="headerlink" title="打印文件或行中的第n个单词或列"></a>打印文件或行中的第n个单词或列</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk '&#123;print $5&#125;' filename</span><br></pre></td></tr></table></figure>

<p>也可以打印多列数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l | awk '&#123;print $1" : " $8&#125;' #打印第1列和第8列进行</span><br></pre></td></tr></table></figure>

<h1 id="网站下载"><a href="#网站下载" class="headerlink" title="网站下载"></a>网站下载</h1><p>wget是一个用于文件下载的命令行工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget URL</span><br></pre></td></tr></table></figure>

<p>-o指定一个日志文件，从而不必将日志信息打印到stdout。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget ftp://xxxxxxxx,img -o xxx.img -o log</span><br></pre></td></tr></table></figure>

<p>运行改命令，屏幕上不会显示任何内容，日志或进度信息会被写入文件log，输出文件为xxx.img</p>
<p>-t指定重试次数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -t 5 URL</span><br></pre></td></tr></table></figure>

<p>–limit-rate按照下面的方式对wget限速：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --limit-rate 20k URL</span><br></pre></td></tr></table></figure>

<p>–quota 或 -Q指定下载量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -Q 100m URL</span><br></pre></td></tr></table></figure>

<p>-c断点续传</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c URL</span><br></pre></td></tr></table></figure>

<p>–mirror以递归的方式收集网页上所有的URL的链接</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --mirror URL</span><br></pre></td></tr></table></figure>

<p>–user和–password提供认证信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --user username --password pass URL</span><br></pre></td></tr></table></figure>

<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h3 id="打印网络接口列表"><a href="#打印网络接口列表" class="headerlink" title="打印网络接口列表"></a>打印网络接口列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | cut -c-10 |tr -d ' ' | tr -s '\n'</span><br></pre></td></tr></table></figure>

<p>ifconfig 输出到前10个字符是保留用于打印网络接口的名称，因此我们用cut命令提取每一行前10个字符。tr -d ‘ ‘删除每一行的所有空格。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig wlan0</span><br></pre></td></tr></table></figure>

<ul>
<li>HWaddr 00:-1c:bf:87:25:d2是硬件地址（MAC地址）</li>
<li>inet addr:192.168.0.82是IP地址</li>
<li>Bcast:192.168.3.255是广播地址</li>
<li>MASK:255.255.252.0是子网掩码</li>
</ul>
<h3 id="FTP自动传输"><a href="#FTP自动传输" class="headerlink" title="FTP自动传输"></a>FTP自动传输</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line">HOST='domain.com'</span><br><span class="line">USER='foo'</span><br><span class="line">PASSWD='password'</span><br><span class="line">ftp -i -n $HOST &lt;&lt;EOF</span><br><span class="line">user $&#123;USER&#125; $&#123;PASSWD&#125;</span><br><span class="line">binary</span><br><span class="line">cd /home/slynux</span><br><span class="line">put testfile.jpg</span><br><span class="line">get serverfile.jpg</span><br><span class="line">quit</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h2 id="SFTP"><a href="#SFTP" class="headerlink" title="SFTP"></a>SFTP</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/slynux</span><br><span class="line">put testfile.jpg</span><br><span class="line">get serverfile.jpg</span><br></pre></td></tr></table></figure>

<p>运行sftp：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sftp user@domainname</span><br></pre></td></tr></table></figure>

<p>SCP</p>
<p>scp是一项比传统远复制工具rcp更安全的文件复制技术。文件都是通过SSH加密通道进行传输</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp filename user@remotehost:/home/path</span><br></pre></td></tr></table></figure>

<h2 id="网络流量与端口分析"><a href="#网络流量与端口分析" class="headerlink" title="网络流量与端口分析"></a>网络流量与端口分析</h2><p>要列出系统中的开发端口已经在端口上的服务的详细信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i</span><br></pre></td></tr></table></figure>

<p>用netstat查看开放端口与服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tnp</span><br></pre></td></tr></table></figure>

















































      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/shell/" rel="tag"># shell</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/12/05/linux/linux%E7%9F%A5%E8%AF%86/" rel="next" title="linux知识收集">
                <i class="fa fa-chevron-left"></i> linux知识收集
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/12/05/linux/linux%E9%97%AE%E9%A2%98/" rel="prev" title="linux使用">
                linux使用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">cooper yuan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">94</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">37</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/amdeo" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#shell实战"><span class="nav-number">1.</span> <span class="nav-text">shell实战</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#打印"><span class="nav-number">2.</span> <span class="nav-text">打印</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#变量"><span class="nav-number">3.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#获取变量的长度"><span class="nav-number">4.</span> <span class="nav-text">获取变量的长度</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#获取当前shell的版本"><span class="nav-number">5.</span> <span class="nav-text">获取当前shell的版本</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#判断当前的用户是为超级用户"><span class="nav-number">6.</span> <span class="nav-text">判断当前的用户是为超级用户</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#通过shell进行数学运算"><span class="nav-number">7.</span> <span class="nav-text">通过shell进行数学运算</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#浮点数运算"><span class="nav-number">7.1.</span> <span class="nav-text">浮点数运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算平方以及平方根："><span class="nav-number">7.2.</span> <span class="nav-text">计算平方以及平方根：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#输出重定向"><span class="nav-number">8.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数组和关联数组"><span class="nav-number">9.</span> <span class="nav-text">数组和关联数组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#获取、设置日期和延时"><span class="nav-number">10.</span> <span class="nav-text">获取、设置日期和延时</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#函数和参数"><span class="nav-number">11.</span> <span class="nav-text">函数和参数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#循环"><span class="nav-number">12.</span> <span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#for循环"><span class="nav-number">12.1.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#while循环"><span class="nav-number">12.2.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#until循环"><span class="nav-number">12.3.</span> <span class="nav-text">until循环</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#比较"><span class="nav-number">13.</span> <span class="nav-text">比较</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串比较"><span class="nav-number">13.1.</span> <span class="nav-text">字符串比较</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cat-命令"><span class="nav-number">14.</span> <span class="nav-text">cat 命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件查找与文件列表find"><span class="nav-number">15.</span> <span class="nav-text">文件查找与文件列表find</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#xargs命令"><span class="nav-number">16.</span> <span class="nav-text">xargs命令</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#校验与核实"><span class="nav-number">17.</span> <span class="nav-text">校验与核实</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Sort"><span class="nav-number">18.</span> <span class="nav-text">Sort</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#example"><span class="nav-number">18.1.</span> <span class="nav-text">example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniq"><span class="nav-number">19.</span> <span class="nav-text">uniq</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分割文件和数据"><span class="nav-number">20.</span> <span class="nav-text">分割文件和数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#spilt"><span class="nav-number">20.1.</span> <span class="nav-text">spilt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cspilt"><span class="nav-number">20.2.</span> <span class="nav-text">cspilt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据扩展名切分文件名"><span class="nav-number">20.3.</span> <span class="nav-text">根据扩展名切分文件名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#批量重命名和移动"><span class="nav-number">21.</span> <span class="nav-text">批量重命名和移动</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#example-1"><span class="nav-number">21.1.</span> <span class="nav-text">example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#拼写检查与词典操作"><span class="nav-number">22.</span> <span class="nav-text">拼写检查与词典操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#交互输入自动化"><span class="nav-number">23.</span> <span class="nav-text">交互输入自动化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件处理"><span class="nav-number">24.</span> <span class="nav-text">文件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#生成任意大小的文件"><span class="nav-number">24.1.</span> <span class="nav-text">生成任意大小的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文本文件的交集与差集"><span class="nav-number">24.2.</span> <span class="nav-text">文本文件的交集与差集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找并删除重复文件"><span class="nav-number">24.3.</span> <span class="nav-text">查找并删除重复文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件权限、所有权"><span class="nav-number">25.</span> <span class="nav-text">文件权限、所有权</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#更改所有权"><span class="nav-number">25.1.</span> <span class="nav-text">更改所有权</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#以递归的方式设置权限"><span class="nav-number">25.1.1.</span> <span class="nav-text">以递归的方式设置权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以递归的方式设置所有权"><span class="nav-number">25.1.2.</span> <span class="nav-text">以递归的方式设置所有权</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#以不同的用户运行可执行文件"><span class="nav-number">25.1.3.</span> <span class="nav-text">以不同的用户运行可执行文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建不可修改文件"><span class="nav-number">25.2.</span> <span class="nav-text">创建不可修改文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看文件类型信息"><span class="nav-number">25.3.</span> <span class="nav-text">查看文件类型信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#显示文件内容"><span class="nav-number">25.4.</span> <span class="nav-text">显示文件内容</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#打印文件的前10行和后10行"><span class="nav-number">25.4.1.</span> <span class="nav-text">打印文件的前10行和后10行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#统计文件的行数、单词数、字符数"><span class="nav-number">25.4.2.</span> <span class="nav-text">统计文件的行数、单词数、字符数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打印目录树"><span class="nav-number">25.5.</span> <span class="nav-text">打印目录树</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文本操作"><span class="nav-number">26.</span> <span class="nav-text">文本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#正则表达式"><span class="nav-number">26.1.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配文本中所有单词"><span class="nav-number">26.2.</span> <span class="nav-text">匹配文本中所有单词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用grep在文件中搜索文本"><span class="nav-number">26.3.</span> <span class="nav-text">用grep在文件中搜索文本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#测试文件是否包含的文件内容"><span class="nav-number">26.4.</span> <span class="nav-text">测试文件是否包含的文件内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用cut按列切分文件"><span class="nav-number">26.5.</span> <span class="nav-text">用cut按列切分文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed"><span class="nav-number">27.</span> <span class="nav-text">sed</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#定址"><span class="nav-number">27.1.</span> <span class="nav-text">定址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选项i"><span class="nav-number">27.2.</span> <span class="nav-text">选项i</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增行"><span class="nav-number">27.3.</span> <span class="nav-text">新增行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选项-e"><span class="nav-number">27.4.</span> <span class="nav-text">选项-e</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插入行"><span class="nav-number">27.5.</span> <span class="nav-text">插入行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#选项-f"><span class="nav-number">27.6.</span> <span class="nav-text">选项-f</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#替换行"><span class="nav-number">27.7.</span> <span class="nav-text">替换行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串替换"><span class="nav-number">27.8.</span> <span class="nav-text">字符串替换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配"><span class="nav-number">27.9.</span> <span class="nav-text">匹配</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#awk"><span class="nav-number">28.</span> <span class="nav-text">awk</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#对文件中的行、单词和字符进行迭代"><span class="nav-number">29.</span> <span class="nav-text">对文件中的行、单词和字符进行迭代</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-迭代文件中的每一行"><span class="nav-number">29.1.</span> <span class="nav-text">(1)迭代文件中的每一行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-迭代一行中的每一个单词"><span class="nav-number">29.2.</span> <span class="nav-text">(2)迭代一行中的每一个单词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-迭代一个单词中每一字符"><span class="nav-number">29.3.</span> <span class="nav-text">(3)迭代一个单词中每一字符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#按列合并文件"><span class="nav-number">30.</span> <span class="nav-text">按列合并文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#可以用paste命令实现按列拼接"><span class="nav-number">30.1.</span> <span class="nav-text">可以用paste命令实现按列拼接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打印文件或行中的第n个单词或列"><span class="nav-number">30.2.</span> <span class="nav-text">打印文件或行中的第n个单词或列</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网站下载"><span class="nav-number">31.</span> <span class="nav-text">网站下载</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#网络"><span class="nav-number">32.</span> <span class="nav-text">网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#打印网络接口列表"><span class="nav-number">32.0.1.</span> <span class="nav-text">打印网络接口列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FTP自动传输"><span class="nav-number">32.0.2.</span> <span class="nav-text">FTP自动传输</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SFTP"><span class="nav-number">32.1.</span> <span class="nav-text">SFTP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#网络流量与端口分析"><span class="nav-number">32.2.</span> <span class="nav-text">网络流量与端口分析</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cooper yuan</span>

  
</div>








  <div class="footer-custom"><a target="_blank" href="https://beian.miit.gov.cn">苏ICP备18059520号</a></div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
